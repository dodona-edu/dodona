<% membership_status = user.membership_status_for(course) %>
<% case membership_status
when 'pending' %>
  <%= button_to update_membership_course_path(course),
                params: {user: user.id, status: 'student'},
                title: t('users.index.approve'),
                class: 'btn btn-sm btn-default' do %>
    <span class='glyphicon glyhicon-ok' aria-hidden='true'></span>
  <% end %>
  <%= button_to update_membership_course_path(course),
                params: {user: user.id, status: 'unsubscribed'},
                title: t('users.index.reject'),
                class: 'btn btn-sm btn-default' do %>
    <span class='glyphicon glyhicon-remove' aria-hidden='true'></span>
  <% end %>
<% when 'student' %>
  <% if policy(course).update_course_admin_membership? %>
    <%= button_to update_membership_course_path(course),
                  params: {user: user.id, status: 'course_admin'},
                  title: t('users.index.promote'),
                  class: 'btn btn-sm btn-default' do %>
      <span class='glyphicon glyphicon-education' aria-hidden='true'></span>
    <% end %>
  <% end %>
  <%= button_to update_membership_course_path(course),
                params: {user: user.id, status: 'unsubscribed'},
                title: t('users.index.unsubscribe'),
                class: 'btn btn-sm btn-default' do %>
    <span class='glyphicon glyphicon-log-out' aria-hidden='true'></span>
  <% end %>
<% when 'course_admin' %>
  <% if policy(course).update_course_admin_membership? %>
    <%= button_to update_membership_course_path(course),
                  params: {user: user.id, status: 'student'},
                  title: t('users.index.demote'),
                  class: 'btn btn-sm btn-default' do %>
      <span class='glyphicon glyphicon-fire' aria-hidden='true'></span>
    <% end %>
  <% end %>
<% when 'unsubscribed' %>
  <%= button_to update_membership_course_path(course),
                params: {user: user.id, status: 'student'},
                title: t('users.index.'),
                class: 'btn btn-sm btn-default' do %>
    <span class='glyphicon glyphicon-log-in' aria-hidden='true'></span>
  <% end %>
<% end %>
