<%
  classes = "btn btn-text with-icon"

  if feedback.submission.blank?
    submission_status_text = t ".no_submission"
  else
    submission_status_text = Submission.human_enum_name(:status, feedback.submission.status)
  end

  if feedback.completed?
    title_text = t ".feedback_finished", status: submission_status_text
    classes += " text-muted"
  else
    title_text = t ".feedback_unstarted", status: submission_status_text
  end

  if local_assigns[:current] == feedback
    classes += " active"
  end
%>

<%= link_to evaluation_feedback_path(evaluation, feedback),
            title: title_text,
            class: classes do %>
  <% if feedback&.submission.present? %>
    <%= submission_status_icon feedback.submission %>
  <% else %>
    <i class="mdi mdi-18 mdi-cancel text-muted"></i>
  <% end %>
  <% if feedback.completed? %>
    <%= t "evaluations.exercises_progress_table.evaluated" %>
  <% else %>
    <%= t "evaluations.exercises_progress_table.evaluate" %>
  <% end %>
<% end %>
