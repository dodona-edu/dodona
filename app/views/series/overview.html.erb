<% summary = ExercisesSummary.new user: current_user, series: @series %>

<div class="col-sm-10 col-sm-offset-1 col-xs-12">
  <div class="card">
    <div class="card-title card-title-colored">
      <h2 class="card-title-text"><%= @series.course.name %></h2>
      <h3 class="card-subtitle-text"> <%= @series.name %></h3>
    </div>
    <div class="card-supporting-text">
      <span style="float: left">
        <%= t '.progress',
            solved: summary.count(&:solved_before_deadline?),
            count: summary.count %>
      </span>
      <span style="float: right">
        <%= render partial: 'deadline', locals: { series: @series } %>
      </span>
    </div>
  </div>

  <% summary.exercise_summaries.each do |ex| %>
    <div class="card exercise-description">
      <div class="card-title card-title-colored">
        <h2 class="card-title-text">
          <%= link_to ex.exercise.name, exercise_path(ex.exercise) %>
        </h2>
      </div>
      <div class="card-supporting-text">
        <%= ex.exercise.description %>
      </div>
      <div class="card-actions card-border">
        <% if ex.submitted? || ex.deadline_passed? %>
          <div class="btn-text submission-status-button">
            <%= render partial: 'exercises/status_icon', locals: { summary: ex } %>
            <%= render partial: 'exercises/exercise_user_status', locals: { summary: ex } %>
          </div>
        <% else %>
          <%= link_to t('exercises.show.handin'), exercise_path(ex.exercise), class: "btn-text" %>
        <% end %>
      </div>
    </div>
  <% end %>
</div>
