<table class="table table-index table-resource">
  <thead>
    <tr>
      <th class='status-icon'></th>
      <th><%= User.human_attribute_name("username") %></th>
      <th><%= User.human_attribute_name("name") %></th>
      <th><%= User.human_attribute_name("email") %></th>
      <th class='text-right'><%= t("users.index.progress") %></th>
      <th class= 'text-right'><%= t("users.index.access_level")%></th>
      <th></th>
    </tr>
  </thead>
  <tbody>
    <% users.each do |user| %>
      <tr>
        <td>
          <% if user.zeus? %>
            <span class="glyphicon glyphicon-king" title='zeus'></span>
          <% end %>
          <% if user.staff? %>
            <span class="glyphicon glyphicon-queen" title='staff'></span>
          <% end %>
          <% if @course && user.admin_of?(@course) %>
            <span class="glyphicon glyphicon-education" title='course admin'></span>
          <% end %>
          <% if user.username.blank? %>
            <span class="glyphicon glyphicon-exclamation-sign"></span>
          <% end %>
        </td>
        <td>
          <%= link_to user.short_name, user %>
        </td>
        <td><%= user.full_name %></td>
        <td><%= user.email %></td>
        <td class='text-right'>
          <%= link_to "#{user.correct_exercises}/#{user.attempted_exercises}", user_submissions_path(user) %>
        </td>
        <% if @course %>
          <td class='text-right'>
            <%= t("activerecord.attributes.course_membership.statuses.#{user.membership_status_for(@course)}") %>
          </td>
        <% end %>
        <td class="actions">
          <% if @course %>
            <%= render partial: 'courses/course_membership_buttons',
                       locals: {course: @course, user: user} %>
          <% end %>
          <% if policy(user).impersonate? %>
            <%= link_to impersonate_user_path(user), class: "btn btn-sm btn-default", title: t("layout.impersonate.impersonate") do %><span class="glyphicon glyphicon-user"></span><% end %>
          <% end %>
          <% if policy(user).edit? %>
            <%= link_to edit_user_path(user), title: t("users.index.edit"), class: "btn btn-sm btn-default" do %><span class="glyphicon glyphicon-pencil"></span><% end %>
          <% end %>
        </td>
      </tr>
    <% end %>
  </tbody>
</table>
<% if users.empty? %>
  <p class="text-center text-muted lead table-placeholder"><%= t 'users.index.no_users' %></p>
<% end %>
<center>
  <%= user_page_navigation_links users, local_assigns.fetch(:pagination_opts, {}) %>
</center>
